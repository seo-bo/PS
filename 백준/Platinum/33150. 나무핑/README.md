# [Platinum III] 나무핑 - 33150 

[문제 링크](https://www.acmicpc.net/problem/33150) 

### 성능 요약

메모리: 44352 KB, 시간: 232 ms

### 분류

자료 구조, 최소 공통 조상, 희소 배열, 트리

### 제출 일자

2025년 1월 13일 21:10:03

### 문제 설명

<p>처음에 $1$번 노드 하나로 이루어진 트리에 $Q$개의 쿼리를 적용하려 하며 $i$번째 쿼리는 다음과 같다.</p>

<ul>
	<li>$q_i$ $w_i$: 새로운 $i + 1$번 노드와 트리의 $q_i$번 노드 사이를 $w_i$의 가중치를 가지는 간선으로 잇는다.</li>
</ul>

<p>각 쿼리마다 노드를 추가한 후의 트리의 지름을 출력하라. 쿼리는 누적된다.</p>

### 입력 

 <p>첫 번째 줄에 쿼리의 개수 $Q$가 주어진다. $\left( 1 \le Q \le 200\,000\right)$</p>

<p>두 번째 줄부터 $Q$개의 줄에 걸쳐 쿼리 $q_i$, $w_i$가 공백으로 구분되어 주어진다. $\left(1 \le q_i \le i; 0 \le w_i \le 10^{9}\right)$</p>

### 출력 

 <p>$Q$개의 줄에 걸쳐 각 쿼리마다 노드를 추가한 후의 트리의 지름을 출력한다. </p>

<p>쿼리는 누적됨에 유의하라.</p>

